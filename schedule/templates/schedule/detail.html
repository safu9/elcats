{% extends "base.html" %}

{% load humanize %}

{% block title %}予定{% endblock %}

{% block content %}
<section class="section">
  <div class="container">
    <nav class="breadcrumb is-small" aria-label="breadcrumbs">
      <ul>
        <li><a href="{% url 'home:index' %}">トップ</a></li>
        <li><a href="{% url 'schedule:index' %}">予定</a></li>
        <li class="is-active"><a href="#">詳細</a></li>
      </ul>
    </nav>

    <h2 class="title">予定詳細</h2>
    <h3 class="subtitle">{{ object.name }}</h3>

    <hr>

    <div class="content">
      <h4>説明</h4>
      {% if object.description %}
      	{{ object.description | linebreaks }}
      {% else %}
      	<p>この予定の説明はありません。</p>
      {% endif %}

      <h4>日時</h4>
      <p>
        {{ object.date|date }}
        {% if object.time_from %}
          {{ object.time_from|time:"H:i" }}
          {% if object.time_to %} ～ {{ object.time_to|time:"H:i" }}{% endif %}
        {% endif %}
      </p>

      {% if object.place %}
        <h4>場所</h4>
        <p>{{ object.place }}</p>
      {% endif %}

      <h4>作成者</h4>
      <p>{{ object.author.username }}</p>

      <h4>参加者</h4>
      <p>
        {% for participant in object.participants.all %}
          {{ participant.username }}
        {% empty %}
          まだ参加者がいません。
        {% endfor %}
      </p>

      <hr>

      {% if object.author == user %}
        <p>
          <a href="{% url 'schedule:update' object.pk %}" class="button is-text is-small">編集</a>
          <a href="{% url 'schedule:delete' object.pk %}" class="button is-text is-small">削除</a>
        </p>
      {% endif %}
    </div>

  </div>
</section>
{% endblock %}
